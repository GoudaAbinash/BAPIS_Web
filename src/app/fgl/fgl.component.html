<app-header quoteNo="{{ quoteNo }}"></app-header>
<!-- <button (click)="aryaApiCall('FGII1435546GFT')">
Arya AI
</button> -->
<h4 style="text-align: center">FGL-Griha Lite(1Y)</h4>
<form [formGroup]="quoteGeneraion" autocomplete="off" [hidden]="ridrectToPay">
    <fieldset class="coverForm">
        <legend>Customer Detailes</legend>
        <mat-form-field class="col4">
            <mat-label>Cover Type</mat-label>
            <mat-select (selectionChange)="changeCoverType($event)" formControlName="coverType">
                <mat-option>-- Select --</mat-option>

                <mat-option value="LTD">FRG-Grih Raksha</mat-option>
                <mat-option value="FSL">FSL-Sookshma Lite</mat-option>
                <mat-option value="SK">FSR-Shop Suraksha</mat-option>
                <mat-option value="SFSP">FUS-Sookshma Udyam</mat-option>
                <mat-option value="GLL">GLL-Griha Lite</mat-option>
                <mat-option value="FGL">FGL-Griha Lite(1Y)</mat-option>
            </mat-select>
            <mat-error *ngIf="CD.coverType.invalid">Please select Cover Type</mat-error>
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Bank Branch Name*:</mat-label>
            <input disabled readonly matInput placeholder="1998 - FCC- Ashram Road" formControlName="branchName"
                *ngIf="loginFlag == '1'" />
            <input matInput placeholder="1998 - FCC- Ashram Road" formControlName="branchName"
                [(ngModel)]="filterTicket" *ngIf="loginFlag == '2' || loginFlag == '3'" (keyup)="showBranchList()" />
            <div class="branchListWrap" *ngIf="loginFlag == '2' || loginFlag == '3'" [hidden]="branchFlag">
                <a href="javascript:;" *ngFor="let b of branchList | filterBranch : filterTicket"
                    (click)="setSpCode(b)">{{ b.SOL_ID }} - {{ b.BRANCH_NAME }}</a>
            </div>
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>FG Branch Code*:</mat-label>
            <input disabled readonly matInput formControlName="fgBrachCode1" />
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Bank Branch Code*:</mat-label>
            <input disabled readonly matInput formControlName="bankBranch" />
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Transaction Type*:</mat-label>
            <!-- <input matInput value="New" formControlName="tranType" /> -->
            <mat-select formControlName="tranType">
                <mat-option>-- Select --</mat-option>
                <mat-option value="New">New Business</mat-option>
                <mat-option value="Renewal">Renewal</mat-option>
            </mat-select>
            <mat-error *ngIf="CD.tranType.invalid">Please select transaction type</mat-error>
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Customer Type*</mat-label>
            <mat-select (selectionChange)="changeCustomerType($event)" formControlName="customerType">
                <mat-option>-- Select --</mat-option>
                <mat-option value="I">Individual</mat-option>
                <!-- <mat-option value="Organization">Organization</mat-option> -->
            </mat-select>
            <mat-error *ngIf="CD.customerType.invalid">Please select customer type</mat-error>
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Salutation *</mat-label>
            <mat-select formControlName="salutation">
                <mat-option>-- Select --</mat-option>
                <mat-option *ngFor="let s of salutationList" [value]="s.value">
                    {{ s.name }}
                </mat-option>
            </mat-select>
            <mat-error *ngIf="CD.salutation.invalid">Please choose an Salutation</mat-error>
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>{{ isCompany ? "Company" : "First" }} Name *</mat-label>
            <input matInput formControlName="firstName" type="text" (change)="checkDuplicatName()"
                placeholder="Ex. ABC"/>
        </mat-form-field>
        <mat-form-field *ngIf="!isCompany" class="col4">
            <mat-label>Last Name *</mat-label>
            <input matInput appPreventSpetialChar formControlName="lastName" type="text" (change)="checkDuplicatName()"
                placeholder="Ex. XYZ" />
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Contact Number *</mat-label>
            <input matInput formControlName="contactNo" maxlength="10" (change)="contactNo(CD.contactNo.value)"
                numbersOnly />
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Email *</mat-label>
            <input matInput formControlName="email" placeholder="Ex. pat@example.com" />
        </mat-form-field>
        <mat-form-field class="col4" *ngIf="CD.contactNo.value">
            <mat-label>Alternative Contact</mat-label>
            <input matInput formControlName="AltcontactNo"  maxlength="10" numbersOnly />
          </mat-form-field>
          <mat-form-field class="col4" *ngIf="CD.email.value">
            <mat-label>Alternative Email</mat-label>
            <input matInput formControlName="Altemail" placeholder="Ex. altpat@example.com" />
          </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Bank Name*</mat-label>
            <input disabled readonly matInput formControlName="bankName" />
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Bank Staff ID</mat-label>
            <input matInput formControlName="bankStaffID" type="text" />
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Bank Cust ID</mat-label>
            <input matInput formControlName="bankCustID" type="text" />
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>FG Staff ID *</mat-label>
            <input matInput formControlName="FGStafID" type="text" />
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Name of the Financer</mat-label>
            <input matInput formControlName="financInterest" />
        </mat-form-field>
        <mat-form-field class="col4" *ngIf="quoteGeneraion.get('financInterest').value !== ''">
            <mat-label>Loan AC No.</mat-label>
            <input matInput maxlength="60" formControlName="loanAcNo" required />
            <mat-error *ngIf="quoteGeneraion.get('loanAcNo').invalid && (quoteGeneraion.get('loanAcNo').dirty || quoteGeneraion.get('loanAcNo').touched)">
              Loan AC No. is required.
            </mat-error>
          </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Comments/Remarks</mat-label>
            <input matInput formControlName="imdGeneral" type="text" />
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Pincode *</mat-label>
            <input matInput type="text" formControlName="pincode" (change)="getDetails(CD.pincode.value)" />
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>SP CODE *</mat-label>
            <input readonly matInput type="text" formControlName="spCode" />
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Banca Segment *</mat-label>
            <mat-select formControlName="bancaSegement">
                <mat-option>-- Select --</mat-option>
                <mat-option value="CRLB">Cross sell to Loan Book</mat-option>
                <mat-option value="LOBK">Loan Book</mat-option>
                <mat-option value="RSSB">Retail sales to Saving Account</mat-option>
            </mat-select>
            <mat-error *ngIf="CD.bancaSegement.invalid">Please select Banca Segment Type</mat-error>
        </mat-form-field>
    </fieldset>

    <!--Policy Details -->
    <fieldset class="coverForm">
        <legend>Policy Details</legend>
        <mat-form-field class="col4">
            <mat-label>Policy Tenure *</mat-label>
            <mat-select formControlName="polTenure" (selectionChange)="setPolTenure(CD.polTenure.value)">
                <mat-option>-- Select --</mat-option>
                <mat-option *ngFor="let t of tenureList" [value]="t">
                    {{ t }}
                </mat-option>
            </mat-select>
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Risk Start Date *</mat-label>
            <input matInput formControlName="riskDate" (dateChange)="changRiskStart()" [matDatepicker]="riskDate"
                [min]="maximumRiskD" />
            <mat-datepicker-toggle matSuffix [for]="riskDate"></mat-datepicker-toggle>
            <mat-datepicker #riskDate></mat-datepicker>
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Risk End Date *</mat-label>
            <input readonly matInput formControlName="riskEndDate" type="text" />
        </mat-form-field>
        <mat-checkbox (change)="anyClaimCall($event)">Any Claim Reported in last 3 years</mat-checkbox>
        <mat-form-field class="col4">
            <mat-label>Previous Insurance co name</mat-label>
            <input matInput formControlName="polInsName" type="text" />
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Policy Number</mat-label>
            <input matInput formControlName="polNumber" type="text" />
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Policy Expiry date</mat-label>
            <input matInput formControlName="policyExpDate" [matDatepicker]="policyExpDate" [min]="maximumDOB" />
            <mat-datepicker-toggle matSuffix [for]="policyExpDate"></mat-datepicker-toggle>
            <mat-datepicker #policyExpDate></mat-datepicker>
        </mat-form-field>
    </fieldset>
    <!-- Mandatory Policy Details -->
    <fieldset class="coverForm">
        <legend>Mandatory Covers</legend>
        <div class="fw">
            <div class="childCheckBox">
                <mat-form-field class="col4">
                    <mat-label>Age of Building</mat-label>
                    <mat-select formControlName="buildingAge" (selectionChange)="setDiscount()"
                        [disabled]="disableSelect">
                        <mat-option value="">-- Select --</mat-option>
                        <!-- <mat-option value="0">Less than 5 years</mat-option>
                        <mat-option value="0">More than 5 years and less than 10</mat-option> -->
                        <mat-option value="-2.5">More than 10 years and less than 25</mat-option>
                        <mat-option value="-5">25 & above</mat-option>
                    </mat-select>
                    <!-- <mat-error *ngIf="CD.buildingAge.invalid">Please select Age of Building</mat-error> -->
                </mat-form-field>
                <mat-form-field class="col4">
                    <mat-label>Construction Type</mat-label>
                    <mat-select formControlName="constructDetails" (selectionChange)="
              checkConstruction(CD.constructDetails.value); setDiscount()
            " [disabled]="disableSelect">
                        <mat-option value="">-- Select --</mat-option>
                        <mat-option value="-5">Kutcha</mat-option>
                        <mat-option value="0">Pukka</mat-option>
                    </mat-select>
                    <!-- <mat-error *ngIf="CD.constructDetails.invalid">Please select Construction Type</mat-error> -->
                </mat-form-field>
                <mat-form-field class="col4">
                    <mat-label>Floors of the building </mat-label>
                    <mat-select formControlName="Floorsofbuild" (selectionChange)="setDiscount()"
                        [disabled]="disableSelect">
                        <mat-option value="">-- Select --</mat-option>
                        <!-- <mat-option value="0">
                            < 7 floors</mat-option>
                                <mat-option value="0">>= 7 floors and <= 11 floors</mat-option>
                                        <mat-option value="0">>= 12 floors and <= 14 floors </mat-option> -->
                        <mat-option value="-5">>=15 floors and <= 24 floors </mat-option>
                                <mat-option value="-7.5">>=25 floors and <= 34 floors</mat-option>
                                        <mat-option value="-15">>= 35 floors </mat-option>
                    </mat-select>
                </mat-form-field>

                <mat-form-field class="col4">
                    <mat-label>Distance of Public Fire Brigade</mat-label>
                    <mat-select formControlName="FireBrigade" (selectionChange)="
              checkConstruction(CD.FireBrigade.value); setDiscount()
            " [disabled]="disableSelect">
                        <mat-option value="">-- Select --</mat-option>
                        <!-- <mat-option value="0">
                            < 3 Km, with no railway crossing</mat-option>
                                <mat-option value="0">3Km to 6 Km with no railway crossing</mat-option>
                                <mat-option value="0">More than 6 Km—Upto 10 Km with no railway crossing</mat-option> -->
                        <mat-option value="-5">More than 10 Kms or any distance with with railway crossing
                        </mat-option>
                    </mat-select>
                    <!-- <mat-error *ngIf="CD.FireBrigade.invalid">Please select Distance of Public Fire Brigade</mat-error> -->
                </mat-form-field>
                <mat-form-field class="col4">
                    <mat-label>Distance from Nearest Water body</mat-label>
                    <mat-select formControlName="DistanceWaterbody" (selectionChange)="
              checkConstruction(CD.DistanceWaterbody.value); setDiscount()
            " [disabled]="disableSelect">
                        <mat-option value="">-- Select --</mat-option>
                        <!-- <mat-option value="0">> 1 KM </mat-option>
                        <mat-option value="0">> 500 Meters and <= 1KM</mat-option>
                                <mat-option value="0">>250 Meters and <= 500 Meters</mat-option> -->
                        <mat-option value="-10">less than 250 Meters </mat-option>
                    </mat-select>
                    <!-- <mat-error *ngIf="CD.DistanceWaterbody.invalid">Please select Distance from Nearest Water
                        body</mat-error> -->
                </mat-form-field>

                <mat-form-field class="col4">
                    <mat-label>Claims Experience </mat-label>
                    <mat-select formControlName="ClaimsExperience" (selectionChange)="
              checkConstruction(CD.ClaimsExperience.value); setDiscount()
            " [disabled]="disableSelect">
                        <mat-option value="">-- Select --</mat-option>
                        <mat-option value="0">No Claim for >= 8 years and < </mat-option>
                                <!-- <mat-option value="0">No Claim for >= 4 years and < 8 years</mat-option>
                                        <mat-option value="0">No Claim for less than 4 years</mat-option> -->
                                <mat-option value="-5">One Claim in last 5 years </mat-option>
                                <mat-option value="-7.5">More than one Claim in last 7 </mat-option>
                                <mat-option value="-10">More than three Claim in last 10 years</mat-option>
                    </mat-select>
                    <!-- <mat-error *ngIf="CD.ClaimsExperience.invalid">Please select Claims Experience</mat-error> -->
                </mat-form-field>
                <mat-form-field class="col4">
                    <mat-label>Round the clock security(24 hour Security Guards Available )
                    </mat-label>
                    <mat-select formControlName="roundTheClock" (selectionChange)="setDiscount()"
                        [disabled]="disableSelect">
                        <mat-option value="">-- Select --</mat-option>
                        <mat-option value="0">Yes</mat-option>
                        <mat-option value="0">No (less than 7 floor Building)</mat-option>
                        <mat-option value="-10">No (7th Floors and above Building)</mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field class="col4">
                    <mat-label>Electrical Installation/Wiring</mat-label>
                    <mat-select formControlName="ElectricalInstall" (selectionChange)="
              checkConstruction(CD.ElectricalInstall.value); setDiscount()
            " [disabled]="disableSelect">
                        <mat-option value="">-- Select --</mat-option>
                        <mat-option value="0">Insulated Wiring </mat-option>
                        <mat-option value="-10">Lose Wiring / Electrical Installation</mat-option>
                    </mat-select>
                    <!-- <mat-error *ngIf="CD.ElectricalInstall.invalid">Please select Electrical
                        Installation/Wiring</mat-error> -->
                </mat-form-field>

                <mat-form-field class="col4">
                    <mat-label>Basement Storage Arrangements</mat-label>
                    <mat-select formControlName="BasementStorage" (selectionChange)="
              checkConstruction(CD.BasementStorage.value); setDiscount()
            " [disabled]="disableSelect">
                        <mat-option value="">-- Select --</mat-option>
                        <mat-option value="-5">Yes</mat-option>
                        <mat-option value="0">No</mat-option>
                    </mat-select>
                    <!-- <mat-error *ngIf="CD.BasementStorage.invalid">Please select Basement Storage
                        Arrangements</mat-error> -->
                </mat-form-field>

                <mat-form-field class="col4">
                    <mat-label>Good Housekeeping</mat-label>
                    <mat-select formControlName="GoodHousekeeping" (selectionChange)="
              checkConstruction(CD.GoodHousekeeping.value); setDiscount()
            " [disabled]="disableSelect">
                        <mat-option value="">-- Select --</mat-option>
                        <mat-option value="0">Yes</mat-option>
                        <mat-option value="-5">No</mat-option>
                    </mat-select>
                    <!-- <mat-error *ngIf="CD.GoodHousekeeping.invalid">Please select Good Housekeeping</mat-error> -->
                </mat-form-field>
                <mat-form-field class="col4">
                    <mat-label>Total Discount/Loading(%)</mat-label>
                    <input matInput formControlName="loadingDisc" type="Number" disabled readonly />
                </mat-form-field>

                <mat-form-field class="col4" *ngIf="CD.loadingDisc.value <= '-80'" (change)="setDiscount()">
                    <mat-label>Commercial loding(%)</mat-label>
                    <input matInput formControlName="commercialoding" type="Number" />
                </mat-form-field>

                <div *ngIf="!blockProcess">
                    <div class="one child-covers">
                        <mat-checkbox (change)="commonCoverChange($event, 'B');setTerrPreDwelling()" class="subchk"
                            formControlName="buildMain">Building</mat-checkbox>
                        <div class="SI_Premium_Child_Cover" *ngIf="CD.buildMain.value">
                            <div class="input-Field">
                                <input type="number" placeholder="Sum Insured" formControlName="fireBuilding"
                                    (focusout)="validateMaxMin($event, 0, 50000000)"
                                    (change)="buildIngPre(CD.fireBuilding.value, '1A**')" />
                                <span *ngIf="!CD.fireBuilding.valid">{{
                                    CD.fireBuilding.errors
                                    }}</span>
                            </div>
                            <div class="input-Field">
                                <input type="number" placeholder="Premium" formControlName="fireBuildingPre" readonly />
                            </div>
                        </div>
                    </div>
                    <div class="one child-covers">
                        <mat-checkbox (change)="commonCoverChange($event, 'C');setTerrPreDwelling()" class="subchk"
                            formControlName="fireContentsMain">Content</mat-checkbox>
                        <div class="SI_Premium_Child_Cover" *ngIf="CD.fireContentsMain.value">
                            <div class="input-Field">
                                <input type="number" placeholder="Sum Insured" formControlName="fireContent"
                                    (focusout)="validateMaxMin($event, 0, 50000000)"
                                    (change)="fireContentPre(CD.fireContent.value)" />
                            </div>
                            <div class="input-Field">
                                <input type="number" placeholder="Premium" formControlName="fireContentP" readonly />
                            </div>
                        </div>
                    </div>
                    <div class="one child-covers">
                        <mat-checkbox class="subchk" (change)="showTerrorism($event)" formControlName="terrorismMain">
                            Terrorism</mat-checkbox>
                        <div class="SI_Premium_Child_Cover" *ngIf="CD.terrorismMain.value">
                            <div class="input-Field">
                                <input type="number" placeholder="Sum Insured" formControlName="longTermTerrSum"
                                    readonly />
                            </div>
                            <div class="input-Field">
                                <input type="number" placeholder="Premium" formControlName="longTermTerrPre" readonly />
                            </div>
                        </div>
                    </div>
                    <!-- <div class="one child-covers">
                        <mat-checkbox class="subchk" (change)="coverContentReset($event)"
                            formControlName="coverContent">Cover for Valuable Contents</mat-checkbox>
                        <div class="SI_Premium_Child_Cover" *ngIf="CD.coverContent.value">
                            <div class="input-Field">
                                <input type="number" placeholder="Sum Insured" (change)="coverContentCalc()"
                                    formControlName="coverContentSum" (focusout)="validateMaxMin($event, 0, 500000)" />
                            </div>
                            <div class="input-Field">
                                <input type="number" placeholder="Premium" formControlName="coverContentPre" readonly />
                            </div>
                        </div>
                    </div> -->
                    <div class="one child-covers">
                        <mat-checkbox class="subchk" (change)="PASelfReset($event)" formControlName="PASelfMain">
                            Personal Accident Cover (Self)</mat-checkbox>
                        <div class="SI_Premium_Child_Cover" *ngIf="CD.PASelfMain.value">
                            <div class="input-Field">
                                <input type="number" placeholder="Sum Insured" (change)="PASelfCalc()"
                                    formControlName="PASelfSum" (focusout)="validateMaxMin($event, 0, 500000)" />
                            </div>
                            <div class="input-Field">
                                <input type="number" placeholder="Premium" formControlName="PASelfPre" readonly />
                            </div>
                        </div>
                    </div>
                    <div class="one child-covers">
                        <mat-checkbox class="subchk" (change)="PASpouseReset($event)" formControlName="PASpouseMain">
                            Personal Accident Cover (Spouse)</mat-checkbox>
                        <div class="SI_Premium_Child_Cover" *ngIf="CD.PASpouseMain.value">
                            <div class="input-Field">
                                <input type="number" placeholder="Sum Insured" (change)="PASpouseCalc()"
                                    formControlName="PASpouseSum" (focusout)="validateMaxMin($event, 0, 500000)" />
                            </div>
                            <div class="input-Field">
                                <input type="number" placeholder="Premium" formControlName="PASpousePre" readonly />
                            </div>
                        </div>
                    </div>
                    <!-- <div class="col1 nopadding">
                        <mat-form-field class="col5">
                            <mat-label>Discount (%):</mat-label>
                            <input formControlName="discount"  numbersOnly matInput  (change)="discountChange($event,'D')" type="number">
                        </mat-form-field>
                        <mat-form-field class="col5">
                            <mat-label>Loading (%):</mat-label>
                            <input numbersOnly formControlName="loading"   (change)="discountChange($event,'L')" matInput  type="number">
                        </mat-form-field>
                    </div> -->
                    <div *ngIf="checkCalc">
                        <button mat-raised-button color="warn" class="marginT10" (click)="calculate()">
                            Calculate
                        </button>
                    </div>
                </div>
                <div *ngIf="blockProcess" class="error">
                    Please contact our nearest branch
                </div>
            </div>
        </div>
    </fieldset>
    <!-- Additional Cover Details -->
    <fieldset *ngIf="CD.PASelfMain.value || CD.PASpouseMain.value" [hidden]="addressFlag">
        <legend>PA Details</legend>
        <mat-form-field class="col4">
            <mat-label>Insured Name *</mat-label>
            <input matInput formControlName="insName" type="text" />
            <mat-error *ngIf="CD.insName.invalid">Please enter insured name</mat-error>
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Date Of Birth *</mat-label>
            <input matInput formControlName="insDate" (dateChange)="getAge()" [matDatepicker]="insDate"
                [max]="maximumDOB" />
            <mat-datepicker-toggle matSuffix [for]="insDate"></mat-datepicker-toggle>
            <mat-datepicker #insDate></mat-datepicker>
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Gender *</mat-label>
            <mat-select formControlName="insGender">
                <mat-option>-- Select --</mat-option>
                <mat-option value="M">Male</mat-option>
                <mat-option value="F">Female</mat-option>
            </mat-select>
            <mat-error *ngIf="CD.insGender.invalid">Please select Gender</mat-error>
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Occupation *</mat-label>
            <mat-select formControlName="insOccupation">
                <mat-option>-- Select --</mat-option>
                <mat-option *ngFor="let o of occupationMaster" [value]="o.Code">
                    {{ o.Description }}
                </mat-option>
            </mat-select>
            <mat-error *ngIf="CD.insOccupation.invalid">Please select Occupation</mat-error>
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Nominee Name *</mat-label>
            <input matInput formControlName="insNominee" type="text" />
            <mat-error *ngIf="CD.insNominee.invalid">Please enter Nominee name</mat-error>
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Nominee Relation *</mat-label>
            <mat-select formControlName="insNomineeRel">
                <mat-option>-- Select --</mat-option>
                <mat-option *ngFor="let n of nomineeRealtionMaster" [value]="n.Code">
                    {{ n.Description }}
                </mat-option>
            </mat-select>
            <mat-error *ngIf="CD.insNomineeRel.invalid">Please select Nominee Relation</mat-error>
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Nominee Date Of Birth *</mat-label>
            <input matInput formControlName="insNomineeDate" [matDatepicker]="insNomineeDate" [max]="maximumDOB" />
            <mat-datepicker-toggle matSuffix [for]="insNomineeDate"></mat-datepicker-toggle>
            <mat-datepicker #insNomineeDate></mat-datepicker>
        </mat-form-field>
        <div *ngIf="CD.PASpouseMain.value">
            <span class="spouseDetails">Spouse Details:</span>
            <mat-form-field class="col4">
                <mat-label>Spouse Name *</mat-label>
                <input matInput formControlName="spouseName" type="text" />
                <mat-error *ngIf="CD.spouseName.invalid">Please enter insured name</mat-error>
            </mat-form-field>
            <mat-form-field class="col4">
                <mat-label>Date Of Birth *</mat-label>
                <input matInput formControlName="spouseDate" [matDatepicker]="spouseDate" [max]="maximumDOB" />
                <mat-datepicker-toggle matSuffix [for]="spouseDate"></mat-datepicker-toggle>
                <mat-datepicker #spouseDate></mat-datepicker>
            </mat-form-field>
            <mat-form-field class="col4">
                <mat-label>Gender *</mat-label>
                <mat-select formControlName="spouseGender">
                    <mat-option>-- Select --</mat-option>
                    <mat-option value="M">Male</mat-option>
                    <mat-option value="F">Female</mat-option>
                </mat-select>
                <mat-error *ngIf="CD.spouseGender.invalid">Please select Gender</mat-error>
            </mat-form-field>
            <mat-form-field class="col4">
                <mat-label>Occupation *</mat-label>
                <mat-select formControlName="spouseOccupation">
                    <mat-option>-- Select --</mat-option>
                    <mat-option *ngFor="let o of occupationMaster" [value]="o.Code">
                        {{ o.Description }}
                    </mat-option>
                </mat-select>
                <mat-error *ngIf="CD.spouseOccupation.invalid">Please select Occupation</mat-error>
            </mat-form-field>
            <mat-form-field class="col4">
                <mat-label>Nominee Name *</mat-label>
                <input matInput formControlName="spouseNominee" type="text" />
                <mat-error *ngIf="CD.spouseNominee.invalid">Please enter Nominee name</mat-error>
            </mat-form-field>
            <mat-form-field class="col4">
                <mat-label>Nominee Relation</mat-label>
                <mat-select formControlName="spouseNomineeRel">
                    <mat-option>-- Select --</mat-option>
                    <mat-option *ngFor="let n of nomineeRealtionMaster" [value]="n.Code">
                        {{ n.Description }}
                    </mat-option>
                </mat-select>
                <mat-error *ngIf="CD.spouseNomineeRel.invalid">Please select Nominee Relation</mat-error>
            </mat-form-field>
            <mat-form-field class="col4">
                <mat-label>Nominee Date Of Birth *</mat-label>
                <input matInput formControlName="spouseNomineeDate" [matDatepicker]="spouseNomineeDate"
                    [max]="maximumDOB" />
                <mat-datepicker-toggle matSuffix [for]="spouseNomineeDate"></mat-datepicker-toggle>
                <mat-datepicker #spouseNomineeDate></mat-datepicker>
            </mat-form-field>
        </div>
    </fieldset>
    <fieldset [hidden]="addressFlag" class="shopAddress">
        <legend>Risk Address</legend>
        <mat-form-field class="col4">
            <mat-label>Address 1*</mat-label>
            <input matInput formControlName="add1" type="text" maxlength="30" (keypress)="omit_special_char($event)" />
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Address 2*</mat-label>
            <input matInput formControlName="add2" type="text" maxlength="30" (keypress)="omit_special_char($event)" />
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Address 3</mat-label>
            <input matInput formControlName="add3" type="text" maxlength="30" (keypress)="omit_special_char($event)" />
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Land Mark *</mat-label>
            <input matInput formControlName="landmark" type="text" maxlength="30" />
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>City/District *</mat-label>
            <input matInput formControlName="city" type="text" maxlength="30" />
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>State *</mat-label>
            <input matInput alphabetsOnly formControlName="state" type="text" maxlength="40" />
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Country *</mat-label>
            <input matInput formControlName="country" type="text" />
        </mat-form-field>
    </fieldset>
    <!-- [hidden]="addressFlag" -->
    <fieldset class="communicationAdd" [hidden]="addressFlag">
        <legend>Communication Address</legend>
        <!-- <mat-checkbox class="col1" value="FAP" (change)="setAddress($event);">Is Communication address same as Shop
            Address?</mat-checkbox> -->
        <div class="overflw-wrap">
            <mat-checkbox value="FAP" (change)="setAddress($event)"></mat-checkbox>
            <p>Is Communication address same as Shop Address?</p>
        </div>
        <mat-form-field class="col4">
            <mat-label>Address 1*</mat-label>
            <input matInput formControlName="comadd1" type="text" maxlength="30"
                (keypress)="omit_special_char($event)" />
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Address 2</mat-label>
            <input matInput formControlName="comadd2" type="text" maxlength="30"
                (keypress)="omit_special_char($event)" />
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Address 3</mat-label>
            <input matInput formControlName="comadd3" type="text" maxlength="30"
                (keypress)="omit_special_char($event)" />
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Land Mark *</mat-label>
            <input matInput formControlName="comlandmark" type="text" maxlength="30" />
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>City/District *</mat-label>
            <input matInput formControlName="comcity" type="text" maxlength="30" />
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>State *</mat-label>
            <input matInput formControlName="comstate" type="text" maxlength="40" />
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>Country *</mat-label>
            <input matInput formControlName="comcountry" type="text" />
        </mat-form-field>
        <mat-form-field class="col4 upperCase">
            <mat-label>Pan Number</mat-label>
            <input matInput formControlName="panNo" type="text" />
        </mat-form-field>
        <mat-form-field class="col4">
            <mat-label>GSTIN Number</mat-label>
            <input matInput formControlName="GSTNo" type="text" />
        </mat-form-field>
    </fieldset>
    <!-- for ckyc -->
    <fieldset class="shopAddress" [hidden]="addressFlag" [disabled]="disableckyc">
        <legend>Ckyc Verification</legend>

        <mat-form-field class="col4">
            <mat-label>Full Name *</mat-label>
            <input matInput formControlName="fullname" type="text" />
            <!-- <mat-error *ngIf="CD.fullname.invalid">Please enter full name</mat-error> -->
        </mat-form-field>

        <mat-form-field class="col4">
            <mat-label>Date Of Birth *</mat-label>
            <input matInput formControlName="dobDate" (dateChange)="getAge()" [matDatepicker]="dobDate"
                [max]="maximumDOB" placeholder="mm/dd/yyyy" />
            <mat-datepicker-toggle matSuffix [for]="dobDate"></mat-datepicker-toggle>
            <mat-datepicker #dobDate></mat-datepicker>
        </mat-form-field>

        <mat-form-field class="col4">
            <mat-label>Gender *</mat-label>
            <mat-select formControlName="gender">
                <mat-option>-- Select --</mat-option>
                <mat-option value="M">Male</mat-option>
                <mat-option value="F">Female</mat-option>
            </mat-select>
            <!-- <mat-error *ngIf="CD.gender.invalid">Please select Gender</mat-error> -->
        </mat-form-field>

        <!-- <mat-checkbox (change)="anyClaimCall($event)">Any Claim Reported in last 3 years</mat-checkbox> -->

        <mat-form-field class="col4">
            <mat-label>ID Type *</mat-label>
            <mat-select formControlName="idtype">
                <mat-option value="">-- Select --</mat-option>
                <mat-option value="CKYC">CKYC</mat-option>
                <mat-option value="Pan">Pan</mat-option>
                <mat-option value="AADHAAR">Aadhar</mat-option>
            </mat-select>
        </mat-form-field>

        <mat-form-field class="col4">
            <mat-label>ID Number</mat-label>
            <input matInput formControlName="idnum" type="text" />
        </mat-form-field>

        <mat-form-field class="col4" *ngIf="ckycflag" readonly>
            <mat-label>Ckyc Number</mat-label>
            <input matInput formControlName="ckycno" type="text" />
        </mat-form-field>
        <mat-form-field class="col4" *ngIf="ckycref" readonly>
            <mat-label>Ckyc Ref.No</mat-label>
            <input matInput formControlName="proposal" type="text" />
        </mat-form-field>
        <button mat-raised-button color="warn" [style.display]="verfyilagf ? 'none' : 'inline-block'"
            (click)="verifyckyc()">
            Verify
        </button>
    </fieldset>
    <fieldset [hidden]="addressFlag">
        <legend>Annexure Details</legend>
        <form [formGroup]="annexureForm">
            <div formArrayName="detailSections">
                <div *ngFor="let a of getSections(annexureForm); let $index = index" class="annexureFormContainer">
                    <a href="javascript:void(0)" *ngIf="$index != 0" (click)="removeAnnexureForm($index)"
                        class="removeFile" title="Delete File">Remove (<i class="fa fa-remove"></i>)</a>
                    <div class="addItemWrap" [formGroupName]="$index">
                        <mat-form-field class="col5">
                            <mat-label>Cover Type*</mat-label>
                            <mat-select formControlName="aneCoverType">
                                <mat-option value="">-- Select Cover --</mat-option>
                                <mat-option *ngFor="let a of annexureWithValue" [value]="a.name">
                                    {{ a.name }}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                        <mat-form-field class="col5">
                            <mat-label>Item Description</mat-label>
                            <input matInput formControlName="itemDesc" type="text" />
                        </mat-form-field>
                        <mat-form-field class="col5">
                            <mat-label>Make</mat-label>
                            <input matInput formControlName="make" type="text" />
                        </mat-form-field>
                        <mat-form-field class="col5">
                            <mat-label>Year of Mfg</mat-label>
                            <input matInput formControlName="YearofMFG" type="number" />
                        </mat-form-field>
                        <mat-form-field class="col5">
                            <mat-label>Sum Insured</mat-label>
                            <input matInput formControlName="sumins" type="number" (change)="compareSumIn($index)" />
                        </mat-form-field>
                        <div class="col1"></div>
                    </div>
                </div>
            </div>
        </form>
        <div class="hrefWrap">
            <a href="javascript:;" (click)="addAnnexureForm()">(<i class="fa fa-plus"></i>) Add More Annexure</a>
        </div>
    </fieldset>
    <fieldset [hidden]="addressFlag">
        <legend>Documents</legend>
        <div class="input-field width100">
            <div class="imgWrap">
                <p></p>
                <label>Proposal Form</label>
                <input type="file" id="myFile" (change)="onSelectedFile($event)" />
                <span><i class="fa fa-paperclip" aria-hidden="true"></i>Choose a
                    File..</span>
            </div>
        </div>
        <div class="input-field width100">
            <div class="imgWrap">
                <p></p>
                <label>Other Form</label>
                <input type="file" id="myFile1" (change)="onSelectedFile($event)" />
                <span><i class="fa fa-paperclip" aria-hidden="true"></i>Choose a
                    File..</span>
            </div>
        </div>
        <mat-label>If you want a Booklet print of the Policy, please click on Yes option :-
        </mat-label>
        <mat-radio-group class="col3 radio-btn" aria-label="Select an option" formControlName="printFlag">
            <mat-radio-button value="Y">Yes</mat-radio-button>
            <mat-radio-button value="N" [checked]="true">No</mat-radio-button> </mat-radio-group><br />
    </fieldset>
    <fieldset *ngIf="showQuote">
        <legend>Premium Summary & Payment</legend>
        <div class="premiumWrap">
            <p>
                Net Premium : <b> <i class="fa fa-rupee"></i>{{ netPremium }}</b>
            </p>
            <!-- <p>Discount/Loading : <b> <i class="fa fa-rupee"></i>{{discountLoad}}</b></p> -->
            <p>
                GST ( 18% ) : <b> <i class="fa fa-rupee"></i>{{ gst }}</b>
            </p>
            <p>
                Total Premium : <b> <i class="fa fa-rupee"></i>{{ totalPre }}</b>
            </p>
        </div>
        <div class="paymentMethod" *ngIf="saveAndPayment || paymentOptReq">
            <div class="col1">
                <mat-label>Payment Method *</mat-label>
                <mat-radio-group class="col3 radio-btn" aria-label="Select an option" formControlName="paymentMethod"
                    (change)="selectPayMethod(CD.paymentMethod.value)">
                    <mat-radio-button value="S">Saving Account</mat-radio-button>
                    <mat-radio-button value="B">Bank Reference ID</mat-radio-button>
                </mat-radio-group>
            </div>
            <div class="col1 marginT10">
                <mat-form-field class="col4" *ngIf="CD.paymentMethod.value == 'S'">
                    <mat-label>Saving/Current Account No. *</mat-label>
                    <input matInput formControlName="customerAcNo" numbersOnly />
                </mat-form-field>
                <mat-form-field class="col4" *ngIf="CD.paymentMethod.value == 'B'">
                    <mat-label>Bank Reference No. *</mat-label>
                    <input matInput type="text" formControlName="bankRefNo"
                        (change)="getReceiptDeatils(CD.bankRefNo.value)" />
                    <a href="javascript:;" (click)="getReceiptDeatils(CD.bankRefNo.value)" class="search"><i
                            class="fa fa-search"></i></a>
                </mat-form-field>
            </div>
        </div>
        <div class="btnWrap" *ngIf="currentStatus != 'C'">
            <button mat-raised-button color="warn" (click)="modify()" *ngIf="!checkCalc && !makePaymentFlag">
                Modify
            </button>
            <button mat-raised-button color="warn" (click)="updateQuote()" *ngIf="updateQuoteFlag">
                Update Quote
            </button>
            <button mat-raised-button color="warn" (click)="quote()" *ngIf="issueQuoteFlag">
                Issue Quote
            </button>
            <button mat-raised-button color="warn" (click)="saveQuoteDetails()" *ngIf="saveQuoteDetailsFlag">
                Save
            </button>
            <button mat-raised-button color="warn" (click)="saveQuoteDetails()" *ngIf="saveAndPayment">
                Save & Payment
            </button>
            <button mat-raised-button color="warn" (click)="payment()" *ngIf="makePaymentFlag">
                Make Payment
            </button>
        </div>
    </fieldset>
</form>
<div *ngIf="ridrectToPay">
    <div class="redirectMsg" *ngIf="showRedirectMsg">
        <p>Your payment request is being processed....</p>
        <p>Please Don't Refresh..</p>
    </div>
    <div class="suscessRes" *ngIf="!showRedirectMsg">
        <p>Payment is successful</p>
        <p>
            Quote No - <b>{{ quoteNo }}</b>
        </p>
        <p>
            Customer Name - <b>{{ customerName }}</b>
        </p>
        <p>
            Customer ID - <b>{{ bankCustID }}</b>
        </p>
        <p>
            Customer Ac No - <b>{{ AcNo }}</b>
        </p>
        <p>
            FG Transaction ID - <b>{{ trnID }}</b>
        </p>
        <p *ngIf="policyNo">
            {{ policyText }}<b>{{ policyNo }}</b>&nbsp;&nbsp;<a rel="noopener noreferrer"
                (click)="policyDownload(policyNo)">Download</a>
        </p>
    </div>
</div>
<div class="overlay" [ngClass]="{ active: showReceipt }"></div>
<div class="receiptPopup" [ngClass]="{ active: showReceipt }">
    <a href="javascript:;" (click)="closePop()" class="close">x</a>
    <table>
        <tr>
            <th></th>
            <th>Receipt No.</th>
            <th>Amount</th>
        </tr>
        <tr *ngFor="let r of receiptList; let $index = index">
            <td><input type="checkbox" (change)="selectReceipt(r, $event)" /></td>
            <td>{{ r.receiptno }}</td>
            <td>{{ r.balanceamt }}</td>
        </tr>
        <tr>
            <td colspan="3">
                <span>Amount : <b>{{ totalRA }}</b></span>
            </td>
        </tr>
    </table>
    <p class="error" *ngIf="checkReceiptAmt">
        Receipt amt cann't less then total premium amt.
    </p>
    <a href="javascript:;" class="continue" (click)="bookWithReceiptNo()">Continue</a>
</div>
<ngx-loading [show]="loading"></ngx-loading>